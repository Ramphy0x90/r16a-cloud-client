<div class="files-grid">
	@for (file of files$ | async; track file.id) {
		<div
			class="file-card"
			[class.selected]="selectionMode ? selectedFileIds.has(file.id) : selectedFile?.id === file.id"
			[class.selection-mode]="selectionMode"
			(click)="onFileAction(file)"
		>
			@if (selectionMode) {
				<div class="file-card-checkbox">
					<i
						class="bi"
						[ngClass]="selectedFileIds.has(file.id) ? 'bi-check-circle-fill' : 'bi-circle'"
					></i>
				</div>
			}

			<div class="file-card-icon bi">
				@if (isImageFile(file) && getImagePreviewUrl(file)) {
					<img class="file-card-image-preview" [src]="getImagePreviewUrl(file)!" [alt]="file.name" />
				} @else {
					<i
						class="bi"
						[ngClass]="file.isDirectory ? 'bi-folder-fill' : (file.name | iconFromExtension)"
					></i>
				}
			</div>

			<span class="file-card-name" [title]="file.name">{{ file.name }}</span>
		</div>
	}
</div>
